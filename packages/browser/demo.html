<!doctype html>
<!-- @qr-styled/browser v1.0.1 - Eye color rendering fix - 2026-02-13 -->
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@qr-styled/browser - Demo</title>
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu,
          Cantarell, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 20px;
        background: #f5f5f5;
      }
      h1 {
        color: #333;
        text-align: center;
      }
      .demo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        margin-top: 40px;
      }
      .demo-card {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .demo-card h3 {
        margin: 0 0 15px 0;
        color: #555;
        font-size: 16px;
      }
      .qr-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px;
        background: #fafafa;
        border-radius: 8px;
        padding: 10px;
      }
      .qr-container canvas {
        max-width: 100%;
        height: auto;
      }
      .controls {
        margin-top: 15px;
        display: flex;
        gap: 8px;
      }
      button {
        flex: 1;
        padding: 8px 16px;
        background: #1a73e8;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.2s;
      }
      button:hover {
        background: #1557b0;
      }
      button:active {
        transform: scale(0.98);
      }
      .loading {
        text-align: center;
        color: #999;
        padding: 40px;
      }
      .error {
        background: #ffebee;
        color: #c62828;
        padding: 20px;
        border-radius: 8px;
        margin: 20px auto;
        max-width: 800px;
        border-left: 4px solid #c62828;
      }
    </style>
  </head>
  <body>
    <h1>@qr-styled/browser Demo</h1>
    <p
      style="
        text-align: center;
        color: #666;
        max-width: 800px;
        margin: 0 auto 20px;
      "
    >
      Interactive examples showcasing the browser QR code generator with
      <strong>gradients</strong>, <strong>rounded modules</strong>,
      <strong>custom eye colors</strong>, <strong>logo integration</strong>, and
      specialized QR types
    </p>

    <div
      style="
        background: #e3f2fd;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0 40px 0;
        border-left: 4px solid #2196f3;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
      "
    >
      <h3 style="margin: 0 0 10px 0; color: #1976d2">
        üìò How to run this demo
      </h3>
      <p style="margin: 0 0 10px 0; color: #0d47a1">
        This demo requires a local HTTP server to work correctly. Run:
      </p>
      <pre
        style="
          background: #fff;
          padding: 12px;
          border-radius: 4px;
          overflow-x: auto;
          margin: 0 0 10px 0;
          color: #0d47a1;
        "
      ><code>npm run demo</code></pre>
      <p style="margin: 0; color: #0d47a1; font-size: 14px">
        Then open
        <strong>http://localhost:3000/demo.html</strong> in your browser.
      </p>
    </div>

    <div
      id="loading-message"
      style="
        text-align: center;
        padding: 60px 20px;
        background: white;
        border-radius: 12px;
        margin: 20px 0;
      "
    >
      <div
        style="
          display: inline-block;
          width: 50px;
          height: 50px;
          border: 4px solid #f3f3f3;
          border-top: 4px solid #1a73e8;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        "
      ></div>
      <p style="margin-top: 20px; color: #666; font-size: 18px">
        Loading QR Code Generator...
      </p>
      <p style="color: #999; font-size: 14px">
        Initializing demo, please wait...
      </p>
    </div>

    <style>
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>

    <div class="demo-grid" style="display: none">
      <!-- Example 1: Basic -->
      <div class="demo-card">
        <h3>Basic QR Code</h3>
        <div class="qr-container" id="qr1"></div>
        <div class="controls">
          <button onclick="downloadQR('qr1', 'basic-qr.png')">
            Download PNG
          </button>
          <button onclick="downloadSVG('qr1', 'basic-qr.svg')">
            Download SVG
          </button>
        </div>
      </div>

      <!-- Example 2: Gradient -->
      <div class="demo-card">
        <h3>Gradient QR Code</h3>
        <div class="qr-container" id="qr2"></div>
        <div class="controls">
          <button onclick="downloadQR('qr2', 'gradient-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 3: Rounded Modules -->
      <div class="demo-card">
        <h3>Rounded Modules</h3>
        <div class="qr-container" id="qr3"></div>
        <div class="controls">
          <button onclick="downloadQR('qr3', 'rounded-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 4: Custom Eye Color -->
      <div class="demo-card">
        <h3>Custom Eye Color</h3>
        <div class="qr-container" id="qr4"></div>
        <div class="controls">
          <button onclick="downloadQR('qr4', 'custom-eyes-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 5: Gradient Eyes + Rounded -->
      <div class="demo-card">
        <h3>Gradient with Colored Eyes</h3>
        <div class="qr-container" id="qr5"></div>
        <div class="controls">
          <button onclick="downloadQR('qr5', 'gradient-eyes-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 6: Fully Rounded -->
      <div class="demo-card">
        <h3>Fully Rounded QR</h3>
        <div class="qr-container" id="qr6"></div>
        <div class="controls">
          <button onclick="downloadQR('qr6', 'logo-circle-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 7: High Contrast -->
      <div class="demo-card">
        <h3>High Contrast Eyes</h3>
        <div class="qr-container" id="qr7"></div>
        <div class="controls">
          <button onclick="downloadQR('qr7', 'logo-square-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 8: Purple Gradient -->
      <div class="demo-card">
        <h3>Purple Gradient + Gold Eyes</h3>
        <div class="qr-container" id="qr8"></div>
        <div class="controls">
          <button onclick="downloadQR('qr8', 'logo-gradient-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 9: vCard -->
      <div class="demo-card">
        <h3>vCard Contact</h3>
        <div class="qr-container" id="qr9"></div>
        <div class="controls">
          <button onclick="downloadQR('qr9', 'vcard-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 10: WiFi -->
      <div class="demo-card">
        <h3>WiFi Configuration</h3>
        <div class="qr-container" id="qr10"></div>
        <div class="controls">
          <button onclick="downloadQR('qr10', 'wifi-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 11: Email -->
      <div class="demo-card">
        <h3>Email QR Code</h3>
        <div class="qr-container" id="qr11"></div>
        <div class="controls">
          <button onclick="downloadQR('qr11', 'email-qr.png')">
            Download PNG
          </button>
        </div>
      </div>

      <!-- Example 12: SMS -->
      <div class="demo-card">
        <h3>SMS QR Code</h3>
        <div class="qr-container" id="qr12"></div>
        <div class="controls">
          <button onclick="downloadQR('qr12', 'sms-qr.png')">
            Download PNG
          </button>
        </div>
      </div>
    </div>

    <script type="module">
      // Better error handling with more information
      window.addEventListener('error', function (event) {
        console.error('Global error:', event.error);
      });

      window.addEventListener('unhandledrejection', function (event) {
        console.error('Unhandled promise rejection:', event.reason);
      });

      async function initializeDemo() {
        try {
          console.log('üöÄ Starting demo initialization...');
          console.log('üîç Attempting to import from: ./dist/bundle.js');

          const module = await import('./dist/bundle.js');
          console.log('üì¶ Module loaded:', module);
          console.log('üì¶ Available exports:', Object.keys(module));

          const { QRGenerator } = module;
          console.log('‚úÖ QRGenerator extracted:', QRGenerator);

          if (!QRGenerator) {
            throw new Error('QRGenerator is undefined in module exports');
          }

          // Store QR generators globally for download functions
          window.qrGenerators = {};

          console.log('üìù Starting QR code generation...');

          // Example 1: Basic QR Code
          console.log('Generating QR1...');
          const qr1 = new QRGenerator({
            url: 'https://github.com/Luisma92/qr-styled',
            size: 300,
            foregroundColor: '#000000',
            backgroundColor: '#ffffff'
          });
          await qr1.appendTo(document.getElementById('qr1'));
          window.qrGenerators.qr1 = qr1;
          console.log('‚úÖ QR1 completed');

          // Example 2: Gradient QR Code
          console.log('Generating QR2...');
          const qr2 = new QRGenerator({
            url: 'https://www.npmjs.com/package/@qr-styled/browser',
            size: 300,
            gradient: true,
            gradientColors: '#667eea, #764ba2, #f093fb',
            gradientAngle: 135,
            rounded: true
          });
          await qr2.appendTo(document.getElementById('qr2'));
          window.qrGenerators.qr2 = qr2;

          // Example 3: Rounded Modules
          const qr3 = new QRGenerator({
            url: 'https://qr-styled.dev',
            size: 300,
            foregroundColor: '#2196f3',
            backgroundColor: '#ffffff',
            rounded: true,
            moduleRadius: 0.5,
            cornerRadius: 20
          });
          await qr3.appendTo(document.getElementById('qr3'));
          window.qrGenerators.qr3 = qr3;

          // Example 4: Custom Eye Color (different from modules)
          const qr4 = new QRGenerator({
            url: 'https://example.com/custom-eyes',
            size: 300,
            foregroundColor: '#1a1a1a',
            backgroundColor: '#ffffff',
            eyeColor: '#e91e63',
            eyeRadius: 0.5,
            rounded: true,
            moduleRadius: 0.4
          });
          await qr4.appendTo(document.getElementById('qr4'));
          window.qrGenerators.qr4 = qr4;

          // Example 5: Gradient with Colored Eyes + Rounded
          const qr5 = new QRGenerator({
            url: 'https://example.com/gradient-eyes',
            size: 300,
            gradient: true,
            gradientColors: '#FF6B6B, #4ECDC4, #45B7D1',
            gradientAngle: 45,
            eyeColor: '#2d3436',
            eyeRadius: 0.5,
            rounded: true,
            moduleRadius: 0.45,
            cornerRadius: 25
          });
          await qr5.appendTo(document.getElementById('qr5'));
          window.qrGenerators.qr5 = qr5;

          // Example 6: Fully Rounded Modules
          console.log('Generating QR6...');
          const qr6 = new QRGenerator({
            url: 'https://github.com/Luisma92/qr-styled',
            size: 300,
            foregroundColor: '#ff6b6b',
            backgroundColor: '#ffffff',
            rounded: true,
            moduleRadius: 0.5,
            eyeColor: '#c92a2a',
            eyeRadius: 0.5,
            cornerRadius: 30
          });
          await qr6.appendTo(document.getElementById('qr6'));
          window.qrGenerators.qr6 = qr6;
          console.log('‚úÖ QR6 completed');

          // Example 7: High Contrast with Custom Eyes
          console.log('Generating QR7...');
          const qr7 = new QRGenerator({
            url: 'https://www.npmjs.com/package/@qr-styled/browser',
            size: 300,
            foregroundColor: '#1e3a8a',
            backgroundColor: '#ffffff',
            rounded: true,
            moduleRadius: 0.4,
            eyeColor: '#7c3aed',
            eyeRadius: 0.5,
            cornerRadius: 20
          });
          await qr7.appendTo(document.getElementById('qr7'));
          window.qrGenerators.qr7 = qr7;
          console.log('‚úÖ QR7 completed');

          // Example 8: Purple Gradient with Contrasting Eyes
          console.log('Generating QR8...');
          const qr8 = new QRGenerator({
            url: 'https://qr-styled.dev',
            size: 300,
            gradient: true,
            gradientColors: '#8E2DE2, #4A00E0',
            gradientAngle: 135,
            rounded: true,
            moduleRadius: 0.45,
            eyeColor: '#FFD700',
            eyeRadius: 0.5,
            cornerRadius: 25
          });
          await qr8.appendTo(document.getElementById('qr8'));
          window.qrGenerators.qr8 = qr8;
          console.log('‚úÖ QR8 completed');

          // Example 9: vCard Contact
          const qr9 = new QRGenerator({
            type: 'vcard',
            data: {
              firstName: 'John',
              lastName: 'Doe',
              organization: 'Tech Company Inc.',
              phone: '+1-234-567-8900',
              email: 'john.doe@example.com',
              url: 'https://johndoe.com'
            },
            size: 300,
            gradient: true,
            gradientColors: '#11998e, #38ef7d',
            rounded: true,
            eyeColor: '#0e7c61',
            eyeRadius: 0.5
          });
          await qr9.appendTo(document.getElementById('qr9'));
          window.qrGenerators.qr9 = qr9;

          // Example 10: WiFi Configuration
          const qr10 = new QRGenerator({
            type: 'wifi',
            data: {
              ssid: 'MyWiFiNetwork',
              password: 'SecurePassword123',
              encryption: 'WPA'
            },
            size: 300,
            foregroundColor: '#5e35b1',
            backgroundColor: '#ffffff',
            rounded: true,
            moduleRadius: 0.5,
            cornerRadius: 25,
            eyeColor: '#311b92',
            eyeRadius: 0.5
          });
          await qr10.appendTo(document.getElementById('qr10'));
          window.qrGenerators.qr10 = qr10;

          // Example 11: Email QR Code
          const qr11 = new QRGenerator({
            type: 'email',
            data: {
              email: 'contact@example.com',
              subject: 'Hello from QR Code',
              body: 'Scanned from @qr-styled/browser demo'
            },
            size: 300,
            gradient: true,
            gradientColors: '#FC466B, #3F5EFB',
            gradientAngle: 90,
            rounded: true,
            eyeColor: '#FC466B',
            eyeRadius: 0.4
          });
          await qr11.appendTo(document.getElementById('qr11'));
          window.qrGenerators.qr11 = qr11;

          // Example 12: SMS QR Code
          const qr12 = new QRGenerator({
            type: 'sms',
            data: {
              phone: '+1234567890',
              message: 'Check out @qr-styled/browser!'
            },
            size: 300,
            foregroundColor: '#00897b',
            backgroundColor: '#ffffff',
            rounded: true,
            moduleRadius: 0.5,
            eyeColor: '#004d40',
            eyeRadius: 0.5,
            cornerRadius: 30
          });
          await qr12.appendTo(document.getElementById('qr12'));
          window.qrGenerators.qr12 = qr12;

          console.log('‚úÖ All QR codes generated successfully!');

          // Hide loading message and show the demo grid
          const loadingMessage = document.getElementById('loading-message');
          const demoGrid = document.querySelector('.demo-grid');
          if (loadingMessage) loadingMessage.style.display = 'none';
          if (demoGrid) demoGrid.style.display = 'grid';
        } catch (error) {
          console.error('‚ùå Error during QR generation:', error);
          // If it's an Event (like CORS error), convert to readable error
          if (error instanceof Event) {
            throw new Error(
              'Image loading failed (likely CORS issue). Check that all images are accessible.'
            );
          }
          throw error;
        }
      }

      // Initialize the demo
      initializeDemo().catch(error => {
        console.error('‚ùå Error loading demo:', error);

        // Handle Event objects
        let errorMessage, errorStack;
        if (error instanceof Event) {
          errorMessage =
            'Image loading failed (likely CORS issue). External images cannot be loaded due to security restrictions.';
          errorStack = 'Event type: ' + error.type;
        } else {
          errorMessage =
            error?.message || error?.toString() || 'Unknown error occurred';
          errorStack = error?.stack || 'No stack trace available';
        }

        document.body.innerHTML = `
        <div style="padding: 40px; max-width: 800px; margin: 0 auto;">
          <div class="error">
            <h2 style="margin-top: 0;">‚ö†Ô∏è Demo Loading Error</h2>
            <p><strong>Error:</strong> ${errorMessage}</p>
            <details style="margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 4px;">
              <summary style="cursor: pointer; font-weight: bold;">Technical Details</summary>
              <pre style="margin-top: 10px; font-size: 12px; overflow-x: auto;">${errorStack}</pre>
            </details>
            <p>Common causes:</p>
            <ul>
              <li>The demo bundle may not have been built correctly</li>
              <li>CORS issues when loading from file:// protocol</li>
              <li>Browser doesn't support ES modules</li>
            </ul>
            <h3>To run this demo locally:</h3>
            <ol>
              <li>In your terminal, navigate to this directory</li>
              <li>Run: <code style="background: #fff; padding: 2px 6px; border-radius: 3px;">npm run demo</code></li>
              <li>Open <strong>http://localhost:3000/demo.html</strong> in your browser</li>
            </ol>
            <p style="margin-top: 20px; font-size: 14px; opacity: 0.8;">
              Alternatively, you can use any static file server like <code>npx serve</code> or <code>python3 -m http.server</code>
            </p>
          </div>
        </div>
      `;
      });
    </script>

    <script>
      // Global functions for download buttons
      window.downloadQR = async function (containerId, filename) {
        const qr = window.qrGenerators[containerId];
        if (qr) {
          await qr.download(filename);
        }
      };

      window.downloadSVG = async function (containerId, filename) {
        const qr = window.qrGenerators[containerId];
        if (qr) {
          await qr.downloadSVG(filename);
        }
      };
    </script>

    <div
      style="
        margin-top: 60px;
        padding: 20px;
        background: #fff3cd;
        border-radius: 8px;
        border-left: 4px solid #ffc107;
      "
    >
      <h3 style="margin-top: 0">‚ÑπÔ∏è Integration Note</h3>
      <p style="margin: 0; color: #856404">
        This is a demo template. To use @qr-styled/browser in your project:
      </p>
      <pre
        style="
          background: #f8f9fa;
          padding: 15px;
          border-radius: 4px;
          overflow-x: auto;
          margin: 15px 0 0 0;
        "
      ><code>npm install @qr-styled/browser

import { QRGenerator } from '@qr-styled/browser';

const qr = new QRGenerator({
  url: 'https://example.com',
  size: 300,
  gradient: true,
  gradientColors: '#667eea, #764ba2'
});

await qr.appendTo(document.getElementById('container'));</code></pre>
    </div>
  </body>
</html>
